# 2025_02_27 (11주차 Day 4)

맵 제작의 방향성과 에셋 등의 윤곽이 잡혔고, 무엇보다 용량 문제를 깔끔하게 해결해서 이제야 작업다운 작업을 진행할 수 있을 것 같다. <br>

받아온 에셋을 적당히 요령있게 배치하는 작업에서 기술할 만한 것들은 별로 없기에.. 튜터님과의 질의 시간에 얻은 정보를 적어둘까 한다.

1. Git 최신화
2. 플레이어 캐릭터의 인칭(시점)에 따라 '총알' 발사체의 방향을 계산하는 방법
3. 데미지 처리 로직에 '치명타' 등의 로직을 추가하기 위한 꿀팁

---

우선 협업에서 가장 중요한 것. <br>

바로 '**Git 최신화**'! <br>

우리 프로젝트의 Git 전략은 Master branch 아래 Develop branch를 파두고 그 아래 각자 맡은 파트에 대해 Features/파트/기능.. 이라는 이름으로 branch를 파서 주기적으로 develop에 병합하는 방식을
채용했다. <br>

여기서 중요한 것이 각자 개발하는 Feature branch는 되도록 짧은 목표를 잡고 완성하여 develop에 병합, 다른 팀원들이 받아서 개발에 사용할 수 있도록 하는 것이다. <br>

그러면 다른 팀원이 완성하여 develop에 병합한 작업물을, Features branch에서 작업을 진행중인 나는 어떻게 받아오는가? <br>

git desktop 기준으로는 다음과 같은 절차를 걸쳐 최신화를 수행해준다. <br>

1. Features branch에서 아직 commit할 수 없는 변경사항들에 대해 stashed changes로 넘겨준다. <br>
2. develop branch로 넘어가서 최신화된 내용을 pull 받는다. <br>
3. 다시 Features branch로 돌아와서 current branch -> 아래 choose a branch to merge into 버튼을 누르고 develop branch로부터 병합받는다. <br>
4. 그상태로 push해주면 최신화 완료! <br>
5. 이후 stashed로 넘겨뒀던 작업물을 restore로 가져온다. <br>

그리고 fork에서는.. develop에서 변경사항들을 pull 받은 후 Features로 넘어가 develop branch를 우클릭, merge... 버튼을 눌러 merge develop into Features < 를 진행해준다.
이후 Features branch를 push 해주면 끝. <br>

---

오늘 튜터님과의 질의시간에는 '총알'에 대한 이야기를 주로 나누었다. <br>

우선 우리 게임의 경우 3인칭과 1인칭 시점을 넘나드는 기능이 존재한다. <br>

그래서 만약 총알이 총구 끝으로부터 날아가는 기능을 구현할 적에, 이 총알이라는게 어떻게 날아가고 화면에 비춰지는가에 대한 부분에 있어 튜터님이 지혜를 나누어주셨다. <br>

총알이 날아가는 방향을 정할때에는 화면기준 정중앙에 위치하게 될 카메라로부터 크로스헤어(조준점)이 가리키는 지점까지 '레일'? 이라는 것을 쏴서 좌표를 구하면 된다고 한다
.(이때 '카메라 매니저' 사용) <br>

구현은 컨트롤러에서 하는 것이 자연스럽다고 하셨고.. 추가로 이러한 인칭에 따른 차이점 탓에 대다수의 fps 게임에서는 3인칭과 1인칭의 총알 메시를 다르게 설정하여 인칭에 따라 보여져야 할
총알의 위치를 각각 계산하는 방식을 채택하기도 하고, 액터 자체를 두개로 나누어 마찬가지로 인칭에 따라 처리하기도 한다고 말씀해주셨다. <br>

총알 관련해서 데미지를 계산하는 부분에 있어 하나 얘기가 나온 것이 있는데. 플레이어 기준으로 발사된 총알이 오버랩되면서 호출할 ApplyDamage()와 AI가 총알에 오버랩되면서 호출할 TakeDamage(). <br>

만약 기습으로 인한 추가 피해, 헤드샷/약점 부위 타격/피격에 따른 치명타 데미지 로직에 대한 계산이 필요하다면 이는 무조건 ApplyDamage()에서 처리하는 것이 옳다고. <br>

UI 호출이라던가 조준점의 변화, 이펙트 등의 구현에 있어 이것을 AI에서 접근하는 것은 바람직하지 않은 방향이기 때문일 것이다. <br>

그리고 중요한 구현방법에 대해서도 설명해 주셨는데. AI로부터 퍼셉션 컴포넌트? 라는 것을 긁어오면 해당 AI가 인지하고있는 컴포넌트의 목록을 불러올 수 있다고 한다. <br>

기습의 구현에 대해서는 이걸 가져와서 플레이어 컴포넌트가 있는지 확인하고 로직을 적용시키면 될 듯 하다. <br>
